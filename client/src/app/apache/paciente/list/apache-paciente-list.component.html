<main class="container">
  <div class="filters-container">
    <form [formGroup]="form" class="search-container">
      <input (focus)="search()" formControlName="searchControl" id="search-text"
             placeholder="Procure: Paciente ou registro..." type="text">
      <button id="search-button">
        <fa-icon [icon]=faSearch></fa-icon>
      </button>
    </form>
    <div class="search-selected">
      <label class="label-selected">Setor</label>
      <select class="selected" [(ngModel)]="setorId" (ngModelChange)="listAdmissoesSetor()">
        <option value="null">Selecione</option>
        <option name="setor" *ngFor="let setor of arrayListSetor" [ngValue]="setor.id">{{setor.sigla}}</option>
      </select>
    </div>

    <ul class="legend">
      <li><span class="legend-success"></span> Realizado</li>
      <li><span class="legend-available"></span> Pendente</li>
      <li><span class="legend-alert"></span> Atrasado</li>
    </ul>
  </div>
  <section class="table">
    <section class="thead">
      <span class="th flex-1">REGISTRO</span>
      <span class="th flex-2">ENTRADA</span>
      <span class="th flex-4">PACIENTE</span>
      <span class="th flex-1">SEXO</span>
      <span class="th flex-1">NASCIMENTO</span>
      <span class="th sigla flex-3">NOME DA MÃE</span>
    </section>
    <section #dataList class="tbody content" [scrollWindow]="false" infinite-scroll (scrolled)="scrollDown()">
      <spinner [loading]="listLoading"></spinner>
      <div [ngClass]="getRowClass(registro)" class="row" *ngFor="let registro of admissoesPacSetor"
           [routerLink]="['/apache','form']"
           [queryParams]="{registro:registro.registroAtendimento.id, dataEntrada: registro.dataEntrada, leito:registro.leito.id, apacheId: registro.apache ? registro.apache.id : null, dataAlta: registro.dataAlta }">
        <span class="td flex-1"><span class="label-card">Registro:</span> {{registro.registroAtendimento.id}}</span>
        <span class="td flex-2"><span class="label-card">Entrada:</span> {{registro.dataEntrada | date: 'dd/MM/yyyy - HH:mm'}}</span>
        <span class="td flex-4"><span class="label-card">Paciente:</span> {{registro.registroAtendimento.paciente.nome}}</span>
        <span class="td flex-1"><span class="label-card">Sexo:</span> {{registro.registroAtendimento.paciente.sexo}}</span>
        <span class="td flex-1"><span class="label-card">Nascimento:</span> {{registro.registroAtendimento.paciente.nascimento | date:'dd/MM/yy'}}</span>
        <span class="td flex-3"><span class="label-card">Mãe:</span> {{registro.registroAtendimento.paciente.nomeMae}}</span>
      </div>
      <app-scroll-spinner [show]="showListScrollSpinner"></app-scroll-spinner>
      <div class="empty" *ngIf="admissoesPacSetor?.length == 0">
        <p>Nenhum paciente encontrado!</p>
        <fa-icon class="icon" [icon]="faFrown" size="2x"></fa-icon>
      </div>
    </section>
  </section>
</main>
